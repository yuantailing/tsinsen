<div>命题逻辑</div>
<div>时间限制：1.0s 内存限制：512.0MB</div>
<div>问题描述</div>
<div>在命题逻辑中，每个变元可以取值为真或假，通过逻辑运算符连接得到逻辑表达式，逻辑表达式的值由逻辑变元的值计算得出。</div>
<div>以下是常用的逻辑运算符。</div>
<div>~：表示否定，~P为真当且仅当P为假。</div>
<div>&gt;：蕴含，P&gt;Q为真当且仅当Q为真或者P为假。</div>
<div>^：合取，P^Q为真当且仅当P和Q同为真。</div>
<div>v：析取，PvQ为真当且仅当P和Q中至少一个为真。</div>
<div>&nbsp;</div>
<div>重言式是指无论变元如何取值其结果都为真的表达式，矛盾式是指无论变元如何取值其结果都为假的表达式。</div>
<div>&nbsp;</div>
<div>在表式逻辑表达式的时候，可以使用辅助符号来方便描述，一个辅助符号可能是另外两个变元或辅助符号运算的结果。</div>
<div>为了使用辅助符号来表示否定运算，我们设置一个虚拟的辅助符号X0，使用X0和另一个变元运算P运算后即得到~P的结果。</div>
<div>&nbsp;</div>
<div>给定一系列辅助符号的定义，问最后一个辅助符号是重言式、矛盾式还是其他表达式。</div>
<div>&nbsp;</div>
<div>输入格式</div>
<div>输入数据第一行是两个整数n、m（1&lt;=n&lt;=4，1&lt;=m&lt;=10）。表示在输入中出现的变元不超过n个、辅助符号为m个，变元依次为P<sub>0</sub>, P<sub>1</sub>, ..., P<sub>n-1</sub>，辅助符号依次为A<sub>0</sub>, A<sub>1</sub>, ..., A<sub>m-1</sub>。</div>
<div>从第二行开始，依次描述A<sub>0</sub>,A<sub>1</sub>,&hellip;A<sub>m-1</sub>，并严格依照以下格式：&nbsp;</div>
<div>Ai L ? R</div>
<div>其中Ai依次为A<sub>0</sub>, A<sub>1</sub>, ..., A<sub>m-1</sub>。?可以为&ldquo;~&rdquo;、&ldquo;&gt;&rdquo;、&ldquo;^&rdquo;、&ldquo;v&rdquo;。L和R可以是变元或者之前出现过的辅助符号。</div>
<div>若?为&ldquo;~&rdquo;，则L必定为X0。</div>
<div>&nbsp;</div>
<div>输出格式</div>
<div>若Am-1为重言式，输出1。</div>
<div>若Am-1为矛盾式，输出-1。</div>
<div>若两者都不是，输出0。</div>
<div>&nbsp;</div>
<div>样例输入</div>
<div>1 2</div>
<div>A0 X0 ~ P0</div>
<div>A1 A0 v P0</div>
<div>&nbsp;</div>
<div>样例输出</div>
<div>1</div>
<div>&nbsp;</div><div>编译语言：CPP,C0X,VC9,C,JAVA,PAS,PYTHON</div>
